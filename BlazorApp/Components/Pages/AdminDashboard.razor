@page "/admin"
@rendermode InteractiveServer
@inject AdminService AdminService

<h3>Admin Dashboard</h3>

<p>Manage your menu items below:</p>


@*Syy miksi nappulat ei toimi, on luultavasti se, että applikaatio ei renderöi sivua uudelleen kun listaan tehdään muutos.*@ 
<div>
    <label>Juice Name:</label>
    <input @bind="newItem.Name" />

    <label>Price:</label>
    <input @bind="newItem.Price" type="number" step="0.01" />

    <button @onclick="AddMenuItem">Add Item</button>
</div>

@if (AdminService.GetMenuItems().Count == 0)
{
    <p>No menu items available.</p>
}
else
{
    <ul>
        @foreach (var item in AdminService.GetMenuItems())
        {
            <li>
                @item.Name - $@item.Price
                <button @onclick="() => RemoveMenuItem(item)">Remove</button>
            </li>
        }
    </ul>
}

@code {
    private MenuItem newItem = new MenuItem();

    private void AddMenuItem()
    {
        AdminService.AddMenuItem(newItem);
        newItem = new MenuItem(); // Reset forms
    }

    private void RemoveMenuItem(MenuItem item)
    {
        AdminService.RemoveMenuItem(item);
    }
}
